---
phase: 02-core-workflows
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [get-shit-done/workflows/execute-plan.md, commands/gsd/execute-plan.md]
autonomous: true
---

<objective>
Update core execution workflow to use JJ commands for all per-task and metadata commits.

Purpose: execute-plan.md is the most frequently used workflow (19 git references). Every task commit flows through here. Converting this first establishes the pattern for all other files.

Output: execute-plan.md workflow and command using JJ commit patterns from jj-integration.md
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-jj-foundation/01-01-SUMMARY.md

# JJ reference (source of truth for all JJ patterns)
@get-shit-done/references/jj-integration.md

# Files to modify
@get-shit-done/workflows/execute-plan.md
@commands/gsd/execute-plan.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update execute-plan.md workflow git commands to JJ</name>
  <files>get-shit-done/workflows/execute-plan.md</files>
  <action>
Replace all git commands with JJ equivalents following jj-integration.md patterns:

**Per-task commits (task_commit section):**
- `git status --short` → `jj status`
- `git add <file>` → Remove (JJ auto-tracks all changes)
- `git commit -m "..."` → `jj commit -m "..."`
- `git rev-parse --short HEAD` → `jj log -r @ -T 'commit_id.short()' --no-graph`

**Metadata commits (git_commit_metadata step):**
- `git add .planning/...` → Remove staging commands
- `git status` → `jj status`
- `git commit -m "..."` → `jj commit -m "..."`

**Codebase map updates (update_codebase_map step):**
- `git diff --name-only` → `jj diff --summary`
- `git add .planning/codebase/*.md` → Remove
- `git commit --amend --no-edit` → `jj squash` (to merge into previous commit)

**Key changes:**
- Remove all `git add` commands (JJ auto-tracks)
- Replace `git commit` with `jj commit`
- Update commit hash capture to use `jj log -r @ -T 'commit_id.short()'`
- Keep same commit message formats (they work with JJ)

**DO NOT change:**
- Task structure or deviation rules
- Checkpoint protocol
- Summary generation logic
  </action>
  <verify>
grep -c "git " get-shit-done/workflows/execute-plan.md should return 0
grep -c "jj " get-shit-done/workflows/execute-plan.md should return > 15
  </verify>
  <done>
All 19 git references in execute-plan.md replaced with JJ equivalents. File passes verification grep tests.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update execute-plan.md command git references</name>
  <files>commands/gsd/execute-plan.md</files>
  <action>
Update any git references in the command file:

- Check for git commands in preconditions or execution context
- Update any git log/status checks to JJ equivalents
- Ensure @reference paths don't point to git-integration.md

This file should have minimal git references (mostly in the workflow), but verify and update any found.
  </action>
  <verify>
grep -c "git " commands/gsd/execute-plan.md should return 0
  </verify>
  <done>
execute-plan.md command file has no git references. All VCS operations use JJ.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `grep -r "git add" get-shit-done/workflows/execute-plan.md` returns no matches
- [ ] `grep -r "git commit" get-shit-done/workflows/execute-plan.md` returns no matches
- [ ] `grep -c "jj commit" get-shit-done/workflows/execute-plan.md` returns > 0
- [ ] Commit message formats preserved (same patterns, just JJ commands)
- [ ] Task commit protocol uses `jj commit -m` and `jj log` for hash capture
</verification>

<success_criteria>
- All git commands in execute-plan.md workflow replaced with JJ equivalents
- execute-plan.md command file verified clean of git references
- JJ patterns follow jj-integration.md reference document
- Commit message formats unchanged (compatible with both VCS)
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-workflows/02-01-SUMMARY.md`
</output>
